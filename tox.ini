[tox]
# Environments to test by default (note: GH action uses 'py' env which uses the
# current python environment)
envlist = py39,py310
# Create a source distribution from the source and build in an isolated virtual
# env
isolated_build = True

# All tox environments inherit settings from the testenv section
[testenv]
deps = -rrequirements_test.txt
# TODO: re-enable flake8 and mypy
commands = python -m pytest --cov=smartbox --cov-append --cov-report=term --cov-report=xml
depends =
    {py39,py310}: clean
    report: py39,py310

[testenv:report]
skip_install = true
commands =
    coverage report
    coverage html

[testenv:clean]
skip_install = true
commands = coverage erase
